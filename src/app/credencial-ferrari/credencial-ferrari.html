<div class="container">

  <!-- CONTENEDOR PRINCIPAL EN HORIZONTAL -->
  <div class="contenido-main">

    <!-- FORMULARIO + CÁMARA -->
    <div class="form-camera-wrapper">

      <!-- Formulario -->
      <form #credencialForm="ngForm" class="formulario">
        <h2>Datos del Socio</h2>

        <label for="nombre">Nombre del socio:</label>
        <input id="nombre" type="text" name="nombre" [(ngModel)]="nombre" required placeholder="Ej. Carlos Rossi">

        <label for="fecha">Fecha de afiliación:</label>
        <input id="fecha" type="date" name="fecha" [(ngModel)]="fecha" required>

        <label for="foto">Foto del socio:</label>
        <input id="foto" type="file" accept="image/*" (change)="onFotoSeleccionada($event)">

        <div class="botones">
          <button type="submit" (click)="generarPDF()">Generar PDF</button>
          <button type="button" (click)="limpiarCampos()">Limpiar</button>
        </div>
      </form>

      <!-- CÁMARA A LA DERECHA DEL FORMULARIO -->
      <div class="camera-panel">

        <button type="button" class="btn-full" (click)="iniciarCamara()">Iniciar cámara</button>

        <select (change)="encenderCamara($event)">
          <option *ngFor="let cam of camaras" [value]="cam.deviceId">
            {{ cam.label || 'Cámara ' + cam.deviceId }}
          </option>
        </select>

        <div *ngIf="mostrarCamara" class="camara-container">
          <video #video autoplay playsinline></video>
          <button type="button" class="btn-capturar" (click)="capturarFoto()">Tomar foto</button>
        </div>

      </div>

    </div>

    <!-- PREVIEW INTACTO -->
    <div class="preview">

      <div class="print-page" id="cardFrontal">
        <div class="card frontal">
          <div class="fondo-frontal">
            <div class="info-socio">
              <div class="datos-socio kanit-medium">
                <p style="position: relative; top: 6px;">Member: {{nombre}}</p>
                <p style="position: relative; bottom: 12px;">Member since: {{fecha}}</p>
              </div>

              <div style="top: 51px; position: relative;">
                <img *ngIf="fotoURL" [src]="fotoURL" alt="Foto del socio" class="foto-socio">
              </div>

            </div>
          </div>
        </div>
      </div>

      <div class="print-page" id="cardTrasera">
        <div class="card trasera">
          <div class="trasera-fondo"></div>
          <img src="assets/logo_ferrari.jpg" class="logo-trasera">
        </div>
      </div>

    </div>

  </div>
</div>

<!-- ÁREA OCULTA PARA CAPTURAS -->
<div id="capture-area"
  style="
    position: fixed;
    top: -2000px;
    left: -2000px;
    width: 385px;     /* 10.2 cm */
    height: 536px;    /* 14.2 cm */
    overflow: hidden;
    background: transparent;
    z-index: -9999;
    pointer-events: none;
  ">
</div>


<!-- ÁREA OCULTA PARA CAPTURAS
<div id="capture-area"
  style="
    position: fixed;
    top: -9999px;
    left: -9999px;
    width: 386px;
    height: 536px;
    pointer-events: none;
    opacity: 0;">
</div> -->